# Tidyverse introduction

```{r, include = FALSE}
par(bg = '#fdf6e3')
```

## Seminar

### Introduction to the tidyverse

The `tidyverse` package makes it easier to pre-process data. By pre-processing, we mean storing data in such a way that observations are in rows and variables are in columns. Data comes in different forms and is not always stored in this way. We will use data from the World Bank to illustrate this point. 

Before getting started, we first need to install the `tidyverse` package like so: `install.packages("tidyverse")`. You only need to install once. However, doing this again is not a mistake. In fact, R, RStudio and R packages are regularly updated. It is good practice to update all of these on your computer as well. Just remember never to update before a deadline!


```{r}
# clear workspace
rm(list = ls())

# load tidyverse package
library(tidyverse)
```

Let's check whether we have updates available by runinng `tidyverse_update()`

```{r, eval=FALSE}
# check for available updates
tidyverse_update()
```

	The following packages are out of date:
	  
    * httr   (1.4.0 -> 1.4.1)
    * modelr (0.1.4 -> 0.1.5)
    * tidyr  (0.8.3 -> 1.0.0)
    * xml2   (1.2.0 -> 1.2.2)
    
    Start a clean R session then run:
    install.packages(c("httr", "modelr", "tidyr", "xml2"))


R tells us that several packages are in indeed out of data (this may be different on your computer - it's possible that everything is up to date on your machine). Below, we update according to the console message.

```{r, eval=FALSE}
install.packages(c("httr", "modelr", "tidyr", "xml2"))
tidyverse_update()
```

    All tidyverse packages up-to-date
    
Now, everything is updated correctly.


Let's check the codebook of our data.

|Variable Name|Description|
|--------|-----------------------------------------------------------|
|IMMBRIT | Out of every 100 people in Britain, how many do you think are immigrants from Non-western countries?|
|over.estimate | 1 if estimate is higher than 10.7%. |
|RSex | 1 = male, 2 = female |
|RAge | Age of respondent |
|Househld | Number of people living in respondent's household |
|party_self | 1 = Conservatives; 2 = Labour; 3 = SNP; 4 = Ukip; 5 = BNP; 6 = GP; 7 = party.other |
|paper | Do you normally read any daily morning newspaper 3+ times/week? |
|WWWhourspW | How many hours WWW per week? |
|religious | Do you regard yourself as belonging to any particular religion? |
|employMonths | How many mnths w. present employer? |
|urban | Population density, 4 categories (highest density is 4, lowest is 1) |
|health.good | How is your health in general for someone of your age? (0: bad, 1: fair, 2: fairly good, 3: good) |
|HHInc | Income bands for household, high number = high HH income |

The dataset is on your memory sticks and also available for download [here](http://philippbroniecki.github.io/ML2017.io/data/BSAS_manip.RData).

```{r}
# load non-western foreigners data set
load("non_western_immigrants.RData")
```

